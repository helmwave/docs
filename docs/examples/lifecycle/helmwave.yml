# Global hooks
lifecycle:
  pre_build:
    - cmd: "ls"
      args: ["-l", "-a"]
      show: false
    - echo "global pre_build"
  post_build:
    - echo "global post_build"
  pre_up:
    - echo "global pre_up"
  post_up:
    - echo "global post_up"

registries:
  - host: registry-1.docker.io

.options: &options
  namespace: my-namespace
  create_namespace: true
  offline_kube_version: 1.22.0
  wait: true
  timeout: 1m
  max_history: 3 # best practice
  chart:
    # For example, we will use bitnami/nats chart, because it's small and fast
    name: oci://registry-1.docker.io/bitnamicharts/nats
    version: 7.8.3 # best practice


releases:
  - name: nats
    <<: *options
    # Special hooks for nats release
    lifecycle:
      pre_up:
        - echo "pre_up for nats"
      post_up:
        - echo "post_up for nats"
      pre_build:
        - echo "pre_build for nats"
      post_build:
        - echo "post_build for nats"
